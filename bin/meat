#!/bin/bash

#/ NAME
#/     meat -- sources a meaty library and dump arguments
#/
#/ SYNOPSIS
#/     meat the stuff you get at safeway
#/     meat --prime japanese kobe steak
#/
#/ DESCRIPTION
#/
#/     The arguments are arbitrary.

shome="$(cd -P -- "$(dirname -- "$0")/.." && pwd -P)"
source "$shome/bin/_prime" "$@"

function dump_args {
  echo "0' $shome"

  local i=1
  while [[ "$#" > 0 ]]; do
    echo "$i: $1"; shift
    i="$((i+1))"
  done
}

function main {
  local quality="meat"

  if [[ "$FLAGS_prime" = "$FLAGS_TRUE" ]]; then
    quality="prime"
  fi

  require "$quality" "$@"

  dump_args "$@"
}

DEFINE_boolean 'prime' 'false' 'enable more restrictions'

parse_command_line "$@" || exit $?
eval set -- "${FLAGS_ARGV}"
main "$@"
