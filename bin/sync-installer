#!/bin/bash -e

pth_install=$1; shift

# initialize the vault
if [[ ! -d $pth_install ]]; then
  git clone https://github.com/HeSYINUvSBZfxqA/vault $pth_install
fi

# uppdate the vault
pushd $pth_install > /dev/null
git pull origin master
popd > /dev/null

# cache repositories
rsync -ia git/. $pth_install/git/ --delete

# cache boxes
rsync -ia --no-t virtualbox/boxes $pth_install/virtualbox/

# cache ports packages
rsync -ia --no-t macports/software $pth_install/macports/
